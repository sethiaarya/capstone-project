<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Golden Twilight • Flights</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            twilight: "#001A33",
            midnight: "#0B2A4A",
            skyfade: "#E9EEF2",
            gold: "#FFC300",
          },
          boxShadow: { glow: "0 10px 25px rgba(0,0,0,.20)" }
        }
      }
    }
  </script>
  <style>
    body {
      background:
        linear-gradient(180deg, #0b2a4a 0%, #113a62 45%, #dfe7ee 90%, #fff7e6 100%)
        fixed;
    }
    .card {
      box-shadow:
        0 10px 25px rgba(0,0,0,.20),
        inset 0 1px 0 rgba(255,255,255,.35);
    }
    .pill { border-radius: 9999px; }
    .muted { color: #6b7280 }
  </style>
</head>
<body class="text-slate-800 min-h-screen">

  <!-- Top bar -->
  <div class="flex items-center justify-between px-6 pt-4 text-white">
    <div class="font-semibold">Golden Twilight</div>
    <div class="flex items-center gap-4">
      <a href="homepage.html" class="text-white/80 hover:text-gold">Explore</a>
      <a href="flights.html" class="text-gold font-semibold">Flights</a>
      <a href="personal_dashboard.html"
         class="bg-gold text-black font-semibold px-4 py-2 rounded-lg shadow hover:brightness-95">
        Dashboard
      </a>
    </div>
  </div>

  <!-- Header -->
  <header class="text-center py-8">
    <h1 class="text-3xl md:text-4xl font-extrabold text-gold drop-shadow">
      Find Flights for Your Next Escape
    </h1>
    <p class="mt-2 text-white/90">
      Search routes across popular cities — exact dates or flexible.
    </p>
  </header>

  <!-- Search Bar -->
  <div class="flex justify-center mt-4">
    <form
      id="flightSearchForm"
      class="w-11/12 max-w-5xl bg-white/98 shadow-glow rounded-2xl px-6 py-4 flex flex-col gap-3 lg:flex-row lg:items-end"
    >
      <!-- From -->
      <div class="flex-1">
        <label class="block text-[11px] text-slate-500 mb-1">From</label>
        <input id="fromInput" type="text" list="cityList" placeholder="e.g. New York"
               class="w-full px-3 py-2 rounded-xl text-[12px] bg-slate-100 focus:outline-none focus:ring-2 focus:ring-gold"/>
      </div>

      <!-- To -->
      <div class="flex-1">
        <label class="block text-[11px] text-slate-500 mb-1">To</label>
        <input id="toInput" type="text" list="cityList" placeholder="e.g. Paris"
               class="w-full px-3 py-2 rounded-xl text-[12px] bg-slate-100 focus:outline-none focus:ring-2 focus:ring-gold"/>
      </div>

      <!-- Date -->
      <div class="flex-1">
        <label class="block text-[11px] text-slate-500 mb-1">Departure Date</label>
        <input id="dateInput" type="date"
               class="w-full px-3 py-2 rounded-xl text-[12px] bg-slate-100 focus:outline-none focus:ring-2 focus:ring-gold"/>
      </div>

      <!-- Passengers -->
      <div class="w-24">
        <label class="block text-[11px] text-slate-500 mb-1">Passengers</label>
        <input id="passengersInput" type="number" min="1" value="1"
               class="w-full px-3 py-2 rounded-xl text-[12px] bg-slate-100 focus:outline-none focus:ring-2 focus:ring-gold"/>
      </div>

      <div class="flex flex-col gap-2">
        <label class="inline-flex items-center gap-2 text-[12px]">
          <input id="flexibleToggle" type="checkbox" class="scale-110"/>
          I'm flexible with dates
        </label>

        <div class="flex gap-2">
          <button type="button" id="shuffleBtn"
                  class="px-3 py-2 rounded-xl border text-[12px] hover:bg-slate-50">
            Shuffle
          </button>
          <button type="submit"
                  class="px-5 py-2.5 rounded-xl bg-gold text-slate-900 text-[12px] font-semibold hover:bg-yellow-400 transition">
            Search
          </button>
        </div>
      </div>
    </form>
  </div>

  <!-- datalist for city autocomplete -->
  <datalist id="cityList"></datalist>

  <!-- Results Section -->
  <section class="mt-10 max-w-5xl mx-auto pb-16">
    <h2 class="text-xl font-semibold text-white mb-3">Available Flights</h2>
    <div id="resultsContainer" class="flex flex-col gap-3 text-sm"></div>
  </section>

  <!-- Footer -->
  <footer class="bg-slate-900 text-sky-100">
    <div class="max-w-7xl mx-auto px-6 py-10 grid md:grid-cols-3 gap-8">
      <div>
        <div class="text-gold font-semibold">Golden Twilight</div>
        <p class="mt-2 text-sky-200 text-sm">
          One portal for inspiration, flights, and smart trip planning.
        </p>
      </div>
      <div>
        <div class="font-semibold text-white text-sm">Explore</div>
        <ul class="mt-2 space-y-1 text-sm">
          <li><a href="index.html" class="hover:underline">Destinations</a></li>
          <li><a href="flights.html" class="hover:underline">Flights</a></li>
          <li><a href="personal_dashboard.html" class="hover:underline">Trip Planner</a></li>
        </ul>
      </div>
      <div>
        <div class="font-semibold text-white text-sm">Support</div>
        <ul class="mt-2 space-y-1 text-sm">
          <li><span class="opacity-60">Help Center</span></li>
          <li><span class="opacity-60">Contact Us</span></li>
        </ul>
      </div>
    </div>
  </footer>

  <!-- Logic -->
  <script>
    // === Simran: Flights search + select + save ===

  function randomPrice() {
    return (200 + Math.random() * 300).toFixed(2); // 200–500
  }

  function randomDuration() {
    const hours = 2 + Math.floor(Math.random() * 11);
    const mins = [0, 15, 30, 45][Math.floor(Math.random() * 4)];
    return `${hours}h ${String(mins).padStart(2, "0")}m`;
  }

  function randomDateWithin60Days() {
    const now = new Date();
    const offset = Math.floor(Math.random() * 60);
    const d = new Date(now);
    d.setDate(now.getDate() + offset);
    return d.toISOString().split("T")[0]; // YYYY-MM-DD
  }

  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("flightSearchForm");
    const resultsContainer = document.getElementById("resultsContainer");

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const from = document.getElementById("fromInput").value.trim();
      const to = document.getElementById("toInput").value.trim();
      const dateInput = document.getElementById("dateInput").value;
      const passengers = parseInt(
        document.getElementById("passengersInput").value,
        10
      ) || 1;
      const flexible = document.getElementById("flexibleToggle").checked;

      resultsContainer.innerHTML = "";

      if (!from || !to) {
        resultsContainer.innerHTML =
          "<div class='text-red-500'>Please enter both departure and destination cities.</div>";
        return;
      }

      // If flexible, show 3 different dates; else only 1 date
      const baseDate = dateInput || randomDateWithin60Days();
      const dates = flexible
        ? [baseDate, randomDateWithin60Days(), randomDateWithin60Days()]
        : [baseDate];

      dates.forEach((date) => {
        const airline = "SkyWings";
        const price = randomPrice();
        const duration = randomDuration();
        const total = (price * passengers).toFixed(2);

        const card = document.createElement("div");
        card.className = "bg-white card rounded-xl p-4 flex flex-col gap-2";
        card.dataset.flight = JSON.stringify({
          from,
          to,
          date,
          airline,
          passengers,
          price,
          total,
          duration,
        });

        card.innerHTML = `
          <div class="flex justify-between">
            <div>
              <div class="font-semibold">${from} → ${to}</div>
              <div class="muted text-[12px]">
                ${date} • ${airline} • ${duration}
              </div>
              <div class="muted text-[12px]">Passengers: ${passengers}</div>
            </div>
            <div class="text-right">
              <div class="text-[13px] font-semibold text-gold">$${price} / person</div>
              <div class="text-[12px] text-slate-600">Total: $${total}</div>
            </div>
          </div>
          <button class="mt-3 px-3 py-1.5 text-[12px] rounded-lg bg-gold text-black font-medium hover:brightness-95 transition select-btn">
            Select Flight
          </button>
        `;

        resultsContainer.appendChild(card);
      });

      attachSelectHandlers();
    });

    // Shuffle button for fun
    document.getElementById("shuffleBtn").addEventListener("click", () => {
      const cities = [
        "New York (JFK)", "Los Angeles (LAX)", "Chicago (ORD)", "Dallas (DFW)",
        "Miami (MIA)", "London (LHR)", "Paris (CDG)", "Tokyo (HND)", "Dubai (DXB)"
      ];
      const fromIndex = Math.floor(Math.random() * cities.length);
      let toIndex;
      do { toIndex = Math.floor(Math.random() * cities.length); }
      while (toIndex === fromIndex);

      document.getElementById("fromInput").value = cities[fromIndex];
      document.getElementById("toInput").value = cities[toIndex];
      document.getElementById("dateInput").value = randomDateWithin60Days();
    });
  });

  function attachSelectHandlers() {
    const buttons = document.querySelectorAll(".select-btn");
    buttons.forEach((btn) => {
      btn.onclick = (e) => {
        const card = e.target.closest("[data-flight]");
        const flight = JSON.parse(card.dataset.flight);

        // read existing list
        const existing =
          JSON.parse(localStorage.getItem("bookedFlights") || "[]");

        // add this flight
        existing.push(flight);

        // save back
        localStorage.setItem("bookedFlights", JSON.stringify(existing));

        alert(
          "Flight booked!\n\n" +
          `${flight.from} → ${flight.to}\n` +
          `${flight.airline} • ${flight.date} • ${flight.duration}\n\n` +
          `Passengers: ${flight.passengers}\n` +
          `Total: $${flight.total}\n\n` +
          "Saved to your Dashboard on this browser."
        );
      };
    });
  }
  // === END Simran flights script ===
</script>
</body>
</html>